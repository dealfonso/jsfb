{"version":3,"file":"filebrowser.compress.js.map","sources":["filebrowser.js"],"sourcesContent":["/**\n   Copyright 2024 Carlos A. (https://github.com/dealfonso)\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\n(function (exports) {\n\tif (typeof exports === \"undefined\") {\n\t\texports = window;\n\t}\n\tclass FBDropdown {\n\t\tstatic defaults = {\n\t\t\tcloseOnOutsideClick: true,\n\t\t\topeningSide: \"auto\",\n\t\t\topeningSideToPage: false\n\t\t};\n\t\textractOptions() {\n\t\t\tlet options = {};\n\t\t\tfor (let key in FBDropdown.defaults) {\n\t\t\t\tif (this.dropdown.dataset[key] !== undefined) {\n\t\t\t\t\toptions[key] = this.dropdown.dataset[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t\tconstructor(dropdown, options = {}) {\n\t\t\tif (dropdown._fbDropdown !== undefined) {\n\t\t\t\treturn dropdown._fbDropdown;\n\t\t\t}\n\t\t\tthis.dropdown = dropdown;\n\t\t\tlet effectiveOptions = Object.assign({}, FBDropdown.defaults, this.extractOptions(), options);\n\t\t\tthis.options = effectiveOptions;\n\t\t\tthis.toggle = dropdown.querySelector(\".fb-dropdown-toggle\");\n\t\t\tthis.content = dropdown.querySelector(\".fb-dropdown-content\");\n\t\t\tthis.isOpen = false;\n\t\t\tthis.documentClickHandler = !this.options.closeOnOutsideClick ? null : event => {\n\t\t\t\tif (!this.dropdown.contains(event.target)) {\n\t\t\t\t\tthis.hide();\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.optionsInMenu = dropdown.querySelectorAll(\".fb-dropdown-content\"),\n\t\t\t\tthis.closeHandler = event => {\n\t\t\t\t\tthis.hide();\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t};\n\t\t\tthis.toggle.addEventListener(\"click\", event => {\n\t\t\t\tthis.toggleOpen();\n\t\t\t\tevent.stopPropagation();\n\t\t\t});\n\t\t\tthis.optionsInMenu.forEach(option => {\n\t\t\t\toption.addEventListener(\"click\", this.closeHandler);\n\t\t\t});\n\t\t\tif (this.options.closeOnOutsideClick) {\n\t\t\t\tdocument.addEventListener(\"click\", this.documentClickHandler);\n\t\t\t}\n\t\t\tdropdown._fbDropdown = this;\n\t\t}\n\t\tshow() {\n\t\t\tlet openToLeft = false;\n\t\t\tswitch (this.options.openingSide) {\n\t\t\tcase \"left\":\n\t\t\t\topenToLeft = true;\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\topenToLeft = false;\n\t\t\t\tbreak;\n\t\t\tcase \"auto\":\n\t\t\tdefault:\n\t\t\t\tlet parentRect;\n\t\t\t\tif (this.options.openingSideToPage) {\n\t\t\t\t\tparentRect = document.body.getBoundingClientRect();\n\t\t\t\t} else {\n\t\t\t\t\tparentRect = this.dropdown.parentElement.getBoundingClientRect();\n\t\t\t\t}\n\t\t\t\tlet buttonRect = this.toggle.getBoundingClientRect();\n\t\t\t\tthis.content.style.removeProperty(\"right\");\n\t\t\t\tthis.content.style.removeProperty(\"left\");\n\t\t\t\tthis.content.style.removeProperty(\"top\");\n\t\t\t\tthis.content.style.removeProperty(\"bottom\");\n\t\t\t\tlet rect = this.content.getBoundingClientRect();\n\t\t\t\tlet openToRightDistance = parentRect.right - (buttonRect.left + rect.width);\n\t\t\t\tlet openToLeftDistance = buttonRect.right - rect.width - parentRect.left;\n\t\t\t\tif (openToLeftDistance > openToRightDistance) {\n\t\t\t\t\topenToLeft = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (openToLeft) {\n\t\t\t\tthis.content.style.right = \"0\";\n\t\t\t}\n\t\t\tthis.content.classList.add(\"show\");\n\t\t\tthis.isOpen = true;\n\t\t}\n\t\thide() {\n\t\t\tthis.content.classList.remove(\"show\");\n\t\t\tthis.isOpen = false;\n\t\t}\n\t\ttoggleOpen() {\n\t\t\tthis.isOpen = !this.isOpen;\n\t\t\tif (this.isOpen) {\n\t\t\t\tthis.show();\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\tFBDropdown.version = \"1.0.0\";\n\tif (typeof exports === \"undefined\") {\n\t\texports = window;\n\t}\n\tclass FileBrowser {\n\t\tstatic iconUtils = {\n\t\t\textensionToIconFontAwesome: {\n\t\t\t\ttxt: \"fas fa-file-alt\",\n\t\t\t\tpdf: \"fas fa-file-pdf\",\n\t\t\t\tdoc: \"fas fa-file-word\",\n\t\t\t\tdocx: \"fas fa-file-word\",\n\t\t\t\txls: \"fas fa-file-excel\",\n\t\t\t\txlsx: \"fas fa-file-excel\",\n\t\t\t\tppt: \"fas fa-file-powerpoint\",\n\t\t\t\tpptx: \"fas fa-file-powerpoint\",\n\t\t\t\tjpg: \"fas fa-file-image\",\n\t\t\t\tjpeg: \"fas fa-file-image\",\n\t\t\t\tpng: \"fas fa-file-image\",\n\t\t\t\tgif: \"fas fa-file-image\",\n\t\t\t\tmp3: \"fas fa-file-audio\",\n\t\t\t\twav: \"fas fa-file-audio\",\n\t\t\t\tmov: \"fas fa-file-video\",\n\t\t\t\tmp4: \"fas fa-file-video\",\n\t\t\t\tavi: \"fas fa-file-video\",\n\t\t\t\tzip: \"fas fa-file-archive\",\n\t\t\t\trar: \"fas fa-file-archive\",\n\t\t\t\ttar: \"fas fa-file-archive\",\n\t\t\t\tgz: \"fas fa-file-archive\",\n\t\t\t\t\"7z\": \"fas fa-file-archive\",\n\t\t\t\texe: \"fas fa-file-executable\",\n\t\t\t\tjs: \"fas fa-file-code\",\n\t\t\t\tcss: \"fas fa-file-code\",\n\t\t\t\thtml: \"fas fa-file-code\",\n\t\t\t\tphp: \"fas fa-file-code\",\n\t\t\t\tpy: \"fas fa-file-code\",\n\t\t\t\tjava: \"fas fa-file-code\",\n\t\t\t\tc: \"fas fa-file-code\",\n\t\t\t\tcpp: \"fas fa-file-code\",\n\t\t\t\th: \"fas fa-file-code\",\n\t\t\t\thpp: \"fas fa-file-code\",\n\t\t\t\tjson: \"fas fa-file-code\",\n\t\t\t\txml: \"fas fa-file-code\",\n\t\t\t\tcsv: \"fas fa-file-excel\",\n\t\t\t\tfile: \"fas fa-file\",\n\t\t\t\thtml: \"fas fa-file-code\",\n\t\t\t\tmd: \"fas fa-file-alt\"\n\t\t\t},\n\t\t\textensionToIconBootstrapIcons: {\n\t\t\t\ttxt: \"bi bi-filetype-txt\",\n\t\t\t\tpdf: \"bi bi-filetype-pdf\",\n\t\t\t\tdoc: \"bi bi-filetype-doc\",\n\t\t\t\tdocx: \"bi bi-filetype-docx\",\n\t\t\t\txls: \"bi bi-filetype-xls\",\n\t\t\t\txlsx: \"bi bi-filetype-xlsx\",\n\t\t\t\tppt: \"bi bi-filetype-ppt\",\n\t\t\t\tpptx: \"bi bi-filetype-pptx\",\n\t\t\t\tjpg: \"bi bi-filetype-jpg\",\n\t\t\t\tjpeg: \"bi bi-filetype-jpg\",\n\t\t\t\tpng: \"bi bi-filetype-png\",\n\t\t\t\tgif: \"bi bi-filetype-gif\",\n\t\t\t\tmp3: \"bi bi-filetype-mp3\",\n\t\t\t\twav: \"bi bi-filetype-wav\",\n\t\t\t\tmov: \"bi bi-filetype-mov\",\n\t\t\t\tmp4: \"bi bi-filetype-mp4\",\n\t\t\t\tavi: \"bi bi-filetype-avi\",\n\t\t\t\tzip: \"bi bi-file-zip\",\n\t\t\t\trar: \"bi bi-file-zip\",\n\t\t\t\ttar: \"bi bi-file-zip\",\n\t\t\t\tgz: \"bi bi-file-zip\",\n\t\t\t\t\"7z\": \"bi bi-file-zip\",\n\t\t\t\texe: \"bi bi-filetype-exe\",\n\t\t\t\tjs: \"bi bi-filetype-js\",\n\t\t\t\tcss: \"bi bi-filetype-css\",\n\t\t\t\thtml: \"bi bi-filetype-html\",\n\t\t\t\tphp: \"bi bi-filetype-php\",\n\t\t\t\tpy: \"bi bi-filetype-py\",\n\t\t\t\tjava: \"bi bi-filetype-java\",\n\t\t\t\tc: \"bi bi-filetype-c\",\n\t\t\t\tcpp: \"bi bi-filetype-cpp\",\n\t\t\t\th: \"bi bi-filetype-h\",\n\t\t\t\thpp: \"bi bi-filetype-hpp\",\n\t\t\t\tjson: \"bi bi-filetype-json\",\n\t\t\t\txml: \"bi bi-filetype-xml\",\n\t\t\t\tcsv: \"bi bi-filetype-csv\",\n\t\t\t\tfile: \"bi bi-filetype-file\",\n\t\t\t\thtml: \"bi bi-filetype-html\",\n\t\t\t\tmd: \"bi bi-filetype-md\"\n\t\t\t},\n\t\t\tdefaultFileIconFontAwesome: \"far fa-file\",\n\t\t\tdefaultFolderIconFontAwesome: \"far fa-folder\",\n\t\t\tdefaultFileIconBootstrapIcons: \"bi bi-file-earmark\",\n\t\t\tdefaultFolderIconBootstrapIcons: \"bi bi-folder\",\n\t\t\tuseBootstrapIcons: function () {\n\t\t\t\tFileBrowser.defaultOptions.extensionToIcon = FileBrowser.iconUtils.extensionToIconBootstrapIcons;\n\t\t\t\tFileBrowser.defaultOptions.defaultFileIcon = FileBrowser.iconUtils.defaultFileIconBootstrapIcons;\n\t\t\t\tFileBrowser.defaultOptions.defaultFolderIcon = FileBrowser.iconUtils.defaultFolderIconBootstrapIcons;\n\t\t\t},\n\t\t\tuseFontAwesomeIcons: function () {\n\t\t\t\tFileBrowser.defaultOptions.extensionToIcon = FileBrowser.iconUtils.extensionToIconFontAwesome;\n\t\t\t\tFileBrowser.defaultOptions.defaultFileIcon = FileBrowser.iconUtils.defaultFileIconFontAwesome;\n\t\t\t\tFileBrowser.defaultOptions.defaultFolderIcon = FileBrowser.iconUtils.defaultFolderIconFontAwesome;\n\t\t\t}\n\t\t};\n\t\tstatic defaultOptions = {\n\t\t\tmode: \"list\",\n\t\t\torderColumn: \"filename\",\n\t\t\torderAscending: true,\n\t\t\thideZeroSize: true,\n\t\t\tallowDuplicates: false,\n\t\t\tseparateFoldersFromFiles: true,\n\t\t\tenableSelection: true,\n\t\t\tallowMultipleSelection: true,\n\t\t\tonFileClick: file => {},\n\t\t\tonFileDoubleClick: file => {},\n\t\t\tonSelectionUpdate: files => {},\n\t\t\toverlayGenerator: file => null,\n\t\t\tonHtmlCreated: (element, file, mode) => {},\n\t\t\tonFileDownload: null,\n\t\t\tonFileDelete: null,\n\t\t\tonFileRename: null,\n\t\t\tonFileCopy: null,\n\t\t\tonFileMove: null,\n\t\t\tonFileShare: null,\n\t\t\tonFileInfo: null,\n\t\t\textensionToIcon: FileBrowser.iconUtils.extensionToIconFontAwesome,\n\t\t\tdefaultFileIcon: FileBrowser.iconUtils.defaultFileIconFontAwesome,\n\t\t\tdefaultFolderIcon: FileBrowser.iconUtils.defaultFolderIconFontAwesome,\n\t\t\tcustomContextMenu: null\n\t\t};\n\t\tstatic mutationObserver = new MutationObserver(mutations => {\n\t\t\tFileBrowser.fromDOM(document.querySelectorAll(\".fb-filebrowser\"));\n\t\t});\n\t\tstatic fromDOM(objects, options = {}) {\n\t\t\tlet result = [];\n\t\t\tif (objects instanceof Element) {\n\t\t\t\tobjects = [objects];\n\t\t\t} else if (objects instanceof NodeList) {\n\t\t\t\tobjects = Array.from(objects);\n\t\t\t} else if (!Array.isArray(objects)) {\n\t\t\t\tthrow new Error(\"Invalid type of objects\");\n\t\t\t}\n\t\t\tif (objects.length === 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tobjects.forEach(filebrowser => {\n\t\t\t\tlet current = filebrowser._fbFileBrowser ?? null;\n\t\t\t\tif (current === null) {\n\t\t\t\t\tcurrent = new FileBrowser(filebrowser, options);\n\t\t\t\t}\n\t\t\t\tresult.push(current);\n\t\t\t});\n\t\t\tif (objects.length === 1) {\n\t\t\t\treturn result[0];\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\t_lastFileSelected = null;\n\t\tconstructor(element, options = {}) {\n\t\t\tif (element instanceof Element) {} else if (typeof element === \"string\") {\n\t\t\t\telement = document.querySelector(element);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Invalid element\");\n\t\t\t}\n\t\t\tif (element._fbFileBrowser !== undefined) {\n\t\t\t\tif (Object.keys(options).length > 0) {\n\t\t\t\t\tconsole.warn(\"Options are being ignored as the FileBrowser already exists. Please use updateOptions instead\");\n\t\t\t\t}\n\t\t\t\treturn element._fbFileBrowser;\n\t\t\t}\n\t\t\tlet optionsFromDOM = FileBrowser._optionsFromDOM(element, FileBrowser.defaultOptions, \"fb\");\n\t\t\tthis.options = Object.assign({}, FileBrowser.defaultOptions, optionsFromDOM, options);\n\t\t\tthis.mode = null;\n\t\t\tthis.filelist = [];\n\t\t\tthis._elementsPlace = null;\n\t\t\tthis._htmlElement = element;\n\t\t\tthis._evaluateOptions();\n\t\t\telement._fbFileBrowser = this;\n\t\t\tlet files = element.querySelectorAll(\"fb-file\");\n\t\t\tlet existingFiles = Array.from(files).map(file => {\n\t\t\t\tconst basicFileInformation = {\n\t\t\t\t\tfilename: \"\",\n\t\t\t\t\tsize: 0,\n\t\t\t\t\tmodified: null,\n\t\t\t\t\tisDirectory: false,\n\t\t\t\t\ttype: \"file\",\n\t\t\t\t\tpreviewUrl: null,\n\t\t\t\t\ticon: null,\n\t\t\t\t\tdata: null\n\t\t\t\t};\n\t\t\t\tlet options = FileBrowser._optionsFromDOM(file, basicFileInformation, \"fb\");\n\t\t\t\treturn Object.assign({}, {\n\t\t\t\t\tfilename: file.textContent,\n\t\t\t\t\tsize: 0,\n\t\t\t\t\tmodified: null\n\t\t\t\t}, options);\n\t\t\t});\n\t\t\tthis.render();\n\t\t\texistingFiles.forEach(file => {\n\t\t\t\tif (file.isDirectory) {\n\t\t\t\t\tthis.addFolder(file.filename, file.modified, file);\n\t\t\t\t} else {\n\t\t\t\t\tthis.addFile(file.filename, file.size, file.modified, file);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tupdateOptions(options, fromClear = false) {\n\t\t\tlet existingOptions = Object.assign({}, this.options);\n\t\t\tif (fromClear) {\n\t\t\t\tthis.options = Object.assign({}, FileBrowser.defaultOptions, options);\n\t\t\t} else {\n\t\t\t\tthis.options = Object.assign({}, this.options, options);\n\t\t\t}\n\t\t\tthis._evaluateOptions();\n\t\t\tlet changed = false;\n\t\t\tfor (let key in this.options) {\n\t\t\t\tif (typeof this.options[key] === \"function\") {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (this.options[key] != existingOptions[key]) {\n\t\t\t\t\tchanged = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!changed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.render();\n\t\t}\n\t\tgetFiles() {\n\t\t\treturn this.filelist;\n\t\t}\n\t\tgetSelectedFiles() {\n\t\t\treturn this.filelist.filter(file => file.selected);\n\t\t}\n\t\tclearSelection() {\n\t\t\tthis.filelist.forEach(file => file.unselect());\n\t\t}\n\t\t_setMode(mode) {\n\t\t\tswitch (mode.toLowerCase()) {\n\t\t\tcase \"list\":\n\t\t\tcase \"grid\":\n\t\t\tcase \"preview\":\n\t\t\t\tthis.mode = mode;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Invalid mode\");\n\t\t\t}\n\t\t}\n\t\t_addFile(filename, options = {}) {\n\t\t\tif (!this.options.allowDuplicates) {\n\t\t\t\tlet existing = this.filelist.find(file => file.filename === filename);\n\t\t\t\tif (existing !== undefined) {\n\t\t\t\t\tthrow new Error(\"File already exists\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tfilename = `${filename}`;\n\t\t\toptions = Object.assign({}, {\n\t\t\t\tcontextMenu: this.options.customContextMenu,\n\t\t\t\ticon: options.isDirectory ? this.options.defaultFolderIcon : this._filenameToIcon(filename),\n\t\t\t\ttype: filename.split(\".\").pop().toLowerCase(),\n\t\t\t\tonFileClick: (file, e) => {\n\t\t\t\t\tif (this.options.enableSelection) {\n\t\t\t\t\t\tlet indexesSelected = this.filelist.filter(file => file.selected).map(file => this.filelist.indexOf(file));\n\t\t\t\t\t\tif (!this.options.allowMultipleSelection) {\n\t\t\t\t\t\t\tthis.clearSelection();\n\t\t\t\t\t\t\tfile.select();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (!e.shiftKey && !e.ctrlKey && !e.metaKey) {\n\t\t\t\t\t\t\t\tthis.clearSelection();\n\t\t\t\t\t\t\t\tfile.select();\n\t\t\t\t\t\t\t\tthis._lastFileSelected = file;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\t\t\tif (this._lastFileSelected !== null) {\n\t\t\t\t\t\t\t\t\tlet lastFileIndex = this.filelist.indexOf(this._lastFileSelected);\n\t\t\t\t\t\t\t\t\tlet currentFileIndex = this.filelist.indexOf(file);\n\t\t\t\t\t\t\t\t\tlet start = Math.min(lastFileIndex, currentFileIndex);\n\t\t\t\t\t\t\t\t\tlet end = Math.max(lastFileIndex, currentFileIndex);\n\t\t\t\t\t\t\t\t\tfor (let i = start; i <= end; i++) {\n\t\t\t\t\t\t\t\t\t\tthis.filelist[i].select();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tfile.select();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis._lastFileSelected = file;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (e.ctrlKey || e.metaKey) {\n\t\t\t\t\t\t\t\t\tfile.toggleSelect();\n\t\t\t\t\t\t\t\t\tif (file.selected) {\n\t\t\t\t\t\t\t\t\t\tthis._lastFileSelected = file;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tthis._lastFileSelected = null;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet indexesSelectedNow = this.filelist.filter(file => file.selected).map(file => this.filelist.indexOf(file));\n\t\t\t\t\t\tif (indexesSelected.join(\",\") !== indexesSelectedNow.join(\",\")) {\n\t\t\t\t\t\t\tthis.options.onSelectionUpdate(this.getSelectedFiles());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.options.onFileClick(file, e);\n\t\t\t\t},\n\t\t\t\tonFileDoubleClick: this.options.onFileDoubleClick\n\t\t\t}, options);\n\t\t\tlet file = new FileInFileBrowser(filename, options);\n\t\t\tlet nextFile = this._findNextFile(file);\n\t\t\tif (nextFile !== null) {\n\t\t\t\tthis.filelist.splice(this.filelist.indexOf(nextFile), 0, file);\n\t\t\t\tthis._placeFile(this._renderFile(file), nextFile);\n\t\t\t} else {\n\t\t\t\tthis.filelist.push(file);\n\t\t\t\tthis._placeFile(this._renderFile(file));\n\t\t\t}\n\t\t\treturn file;\n\t\t}\n\t\taddFile(filename, size, modified, options = {}) {\n\t\t\treturn this._addFile(filename, Object.assign({}, options, {\n\t\t\t\tisDirectory: false,\n\t\t\t\tsize: size,\n\t\t\t\tmodified: modified\n\t\t\t}));\n\t\t}\n\t\taddOrUpdateFile(filename, options = {}) {\n\t\t\tlet existing = this.findFile(filename);\n\t\t\toptions = Object.assign({}, options, {\n\t\t\t\tisDirectory: false,\n\t\t\t\ttype: filename.split(\".\").pop().toLowerCase()\n\t\t\t});\n\t\t\tif (existing === null) {\n\t\t\t\treturn this.addFile(filename, 0, new Date(), options);\n\t\t\t}\n\t\t\tif (existing.isDirectory) {\n\t\t\t\tthrow new Error(\"Existing file is not a file\");\n\t\t\t}\n\t\t\treturn this.updateFile(filename, options);\n\t\t}\n\t\tupdateFile(filename, options = {}) {\n\t\t\tlet existing = this.findFile(filename);\n\t\t\tif (existing === null) {\n\t\t\t\tthrow new Error(\"File not found\");\n\t\t\t}\n\t\t\tlet htmlElement = existing._htmlElement;\n\t\t\tif (existing.compareOptions(options)) {\n\t\t\t\treturn existing;\n\t\t\t}\n\t\t\thtmlElement.remove();\n\t\t\texisting.update(options);\n\t\t\tlet nextFile = this._findNextFile(existing);\n\t\t\tif (nextFile !== null) {\n\t\t\t\tthis.filelist.splice(this.filelist.indexOf(nextFile), 0, existing);\n\t\t\t\tthis._placeFile(this._renderFile(existing), nextFile);\n\t\t\t} else {\n\t\t\t\tthis.filelist.push(existing);\n\t\t\t\tthis._placeFile(this._renderFile(existing));\n\t\t\t}\n\t\t\treturn existing;\n\t\t}\n\t\taddFolder(name, modified, options = {}) {\n\t\t\treturn this._addFile(name, Object.assign({}, {\n\t\t\t\ticon: this.options.defaultFolderIcon,\n\t\t\t\tsize: null\n\t\t\t}, options, {\n\t\t\t\tisDirectory: true,\n\t\t\t\tmodified: modified,\n\t\t\t\ttype: \"folder\"\n\t\t\t}));\n\t\t}\n\t\tupdateFolder(name, options = {}) {\n\t\t\tlet existing = this.findFile(name);\n\t\t\tif (existing === null) {\n\t\t\t\tthrow new Error(\"Folder not found\");\n\t\t\t}\n\t\t\tif (!existing.isDirectory) {\n\t\t\t\tthrow new Error(\"Existing file is not a folder\");\n\t\t\t}\n\t\t\toptions = Object.assign({}, options, {\n\t\t\t\tisDirectory: true,\n\t\t\t\ttype: \"folder\"\n\t\t\t});\n\t\t\tlet htmlElement = existing._htmlElement;\n\t\t\tif (existing.compareOptions(options)) {\n\t\t\t\treturn existing;\n\t\t\t}\n\t\t\thtmlElement.remove();\n\t\t\texisting.update(options);\n\t\t\tlet nextFile = this._findNextFile(existing);\n\t\t\tif (nextFile !== null) {\n\t\t\t\tthis.filelist.splice(this.filelist.indexOf(nextFile), 0, existing);\n\t\t\t\tthis._placeFile(this._renderFile(existing), nextFile);\n\t\t\t} else {\n\t\t\t\tthis.filelist.push(existing);\n\t\t\t\tthis._placeFile(this._renderFile(existing));\n\t\t\t}\n\t\t\treturn existing;\n\t\t}\n\t\taddOrUpdateFolder(name, options = {}) {\n\t\t\tlet existing = this.findFile(name);\n\t\t\toptions = Object.assign({}, options, {\n\t\t\t\tisDirectory: true,\n\t\t\t\ttype: \"folder\"\n\t\t\t});\n\t\t\tif (existing === null) {\n\t\t\t\treturn this.addFolder(name, new Date(), options);\n\t\t\t}\n\t\t\tif (!existing.isDirectory) {\n\t\t\t\tthrow new Error(\"Existing file is not a folder\");\n\t\t\t}\n\t\t\treturn this.updateFolder(name, options);\n\t\t}\n\t\tfindFile(filename) {\n\t\t\tlet existing = this.filelist.find(file => file.filename === filename);\n\t\t\tif (existing === undefined) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn existing;\n\t\t}\n\t\tfindFiles(filter) {\n\t\t\tlet regex = new RegExp(filter.replace(/\\*/g, \".*\").replace(/\\?/g, \".\"), \"i\");\n\t\t\treturn this.filelist.filter(file => regex.test(file.filename));\n\t\t}\n\t\tremoveFile(file) {\n\t\t\tif (file instanceof FileInFileBrowser) {\n\t\t\t\tlet index = this.filelist.indexOf(file);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tthis.filelist.splice(index, 1);\n\t\t\t\t}\n\t\t\t} else if (typeof file === \"string\") {\n\t\t\t\tfile = this.findFile(file);\n\t\t\t\tif (file !== null) {\n\t\t\t\t\tlet index = this.filelist.indexOf(file);\n\t\t\t\t\tif (index >= 0) {\n\t\t\t\t\t\tthis.filelist.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.render();\n\t\t}\n\t\tforEachFile(callback) {\n\t\t\tthis.filelist.forEach(callback);\n\t\t}\n\t\trender(mode = null) {\n\t\t\tif (mode !== null) {\n\t\t\t\tthis._setMode(mode);\n\t\t\t}\n\t\t\tthis._htmlElement.innerHTML = \"\";\n\t\t\tlet element = null;\n\t\t\tswitch (this.mode) {\n\t\t\tcase \"list\":\n\t\t\t\telement = this._createList();\n\t\t\t\tbreak;\n\t\t\tcase \"grid\":\n\t\t\t\telement = this._createGrid();\n\t\t\t\tbreak;\n\t\t\tcase \"preview\":\n\t\t\t\telement = this._createPreview();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis._renderFiles();\n\t\t\tthis._htmlElement.appendChild(element);\n\t\t\tif (this.mode === \"list\") {\n\t\t\t\tlet resizableColumnTable = new ResizableColumnTable(element, {\n\t\t\t\t\tsortableHeaders: true,\n\t\t\t\t\tonSort: (column, ascending) => {\n\t\t\t\t\t\tswitch (column.textContent.trim().toLowerCase()) {\n\t\t\t\t\t\tcase \"name\":\n\t\t\t\t\t\t\tthis.sort(\"filename\", ascending == \"asc\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"size\":\n\t\t\t\t\t\t\tthis.sort(\"size\", ascending == \"asc\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"modified\":\n\t\t\t\t\t\t\tthis.sort(\"modified\", ascending == \"asc\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tswitch (this.options.orderColumn) {\n\t\t\t\tcase \"filename\":\n\t\t\t\t\tresizableColumnTable.setOrder(0, this.options.orderAscending ? \"asc\" : \"desc\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"size\":\n\t\t\t\t\tresizableColumnTable.setOrder(1, this.options.orderAscending ? \"asc\" : \"desc\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"modified\":\n\t\t\t\t\tresizableColumnTable.setOrder(2, this.options.orderAscending ? \"asc\" : \"desc\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._lastFileSelected = null;\n\t\t}\n\t\tsort(column, ascending) {\n\t\t\tlet sortFunction = this._getSortFunction(column, ascending);\n\t\t\tthis.options.orderColumn = column;\n\t\t\tthis.options.orderAscending = ascending;\n\t\t\tthis.filelist.sort(sortFunction);\n\t\t\tthis._elementsPlace.innerHTML = \"\";\n\t\t\tthis._renderFiles();\n\t\t}\n\t\tclear() {\n\t\t\tthis.filelist = [];\n\t\t\tthis.render();\n\t\t}\n\t\tstatic _optionsFromDOM(element, defaultOptions = {}, prefix = \"fb\") {\n\t\t\tlet options = {};\n\t\t\tfor (let key in defaultOptions) {\n\t\t\t\tlet dataKey = prefix + key[0].toUpperCase() + key.slice(1);\n\t\t\t\tif (element.dataset[dataKey] !== undefined) {\n\t\t\t\t\tlet value = element.dataset[dataKey];\n\t\t\t\t\tif (value === \"true\" || value === \"false\") {\n\t\t\t\t\t\toptions[key] = value === \"true\";\n\t\t\t\t\t} else if (!isNaN(parseFloat(value)) && parseFloat(value).toString() == value) {\n\t\t\t\t\t\toptions[key] = parseFloat(value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\toptions[key] = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t\t_generateContextMenu() {\n\t\t\tlet contextMenu = {};\n\t\t\tif (this.options.onFileDownload instanceof Function) {\n\t\t\t\tcontextMenu[\"download\"] = {\n\t\t\t\t\tlabel: \"Download\",\n\t\t\t\t\thandler: this.options.onFileDownload\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (this.options.onFileDelete instanceof Function) {\n\t\t\t\tcontextMenu[\"delete\"] = {\n\t\t\t\t\tlabel: \"Delete\",\n\t\t\t\t\thandler: this.options.onFileDelete\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (this.options.onFileRename instanceof Function) {\n\t\t\t\tcontextMenu[\"rename\"] = {\n\t\t\t\t\tlabel: \"Rename\",\n\t\t\t\t\thandler: this.options.onFileRename\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (this.options.onFileCopy instanceof Function) {\n\t\t\t\tcontextMenu[\"copy\"] = {\n\t\t\t\t\tlabel: \"Copy\",\n\t\t\t\t\thandler: this.options.onFileCopy\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (this.options.onFileMove instanceof Function) {\n\t\t\t\tcontextMenu[\"move\"] = {\n\t\t\t\t\tlabel: \"Move\",\n\t\t\t\t\thandler: this.options.onFileMove\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (this.options.onFileShare instanceof Function) {\n\t\t\t\tcontextMenu[\"share\"] = {\n\t\t\t\t\tlabel: \"Share\",\n\t\t\t\t\thandler: this.options.onFileShare\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (this.options.onFileInfo instanceof Function) {\n\t\t\t\tcontextMenu[\"info\"] = {\n\t\t\t\t\tlabel: \"Info\",\n\t\t\t\t\thandler: this.options.onFileInfo\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (Object.keys(contextMenu).length > 0) {\n\t\t\t\tcontextMenu.__generated = true;\n\t\t\t\treturn contextMenu;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t_evaluateOptions() {\n\t\t\tthis._setMode(this.options.mode);\n\t\t\tthis.options.onHtmlCreated = this.options.onHtmlCreated?.bind(this);\n\t\t\tlet callbacks = [\"onFileClick\", \"onFileDoubleClick\", \"onSelectionUpdate\", \"onFileDownload\", \"onFileDelete\", \"onFileRename\", \"onFileCopy\", \"onFileMove\", \"onFileShare\", \"onFileInfo\"];\n\t\t\tcallbacks.forEach(callback => {\n\t\t\t\tthis.options[callback] = covertCallback(this.options[callback], this);\n\t\t\t});\n\t\t\tif (this.options.customContextMenu === null || this.options.customContextMenu.__generated) {\n\t\t\t\tthis.options.customContextMenu = this._generateContextMenu();\n\t\t\t}\n\t\t\tif ((this.options.extensionToIcon ?? null) === null) {\n\t\t\t\tthis.options.extensionToIcon = {};\n\t\t\t}\n\t\t\tif (typeof this.options.extensionToIcon !== \"object\") {\n\t\t\t\tthrow new Error(\"Invalid extensionToIcon\");\n\t\t\t}\n\t\t}\n\t\t_placeFile(file, nextFile = null) {\n\t\t\tif (nextFile !== null) {\n\t\t\t\tnextFile._htmlElement.insertAdjacentElement(\"beforebegin\", file._htmlElement);\n\t\t\t} else {\n\t\t\t\tthis._elementsPlace.appendChild(file._htmlElement);\n\t\t\t}\n\t\t\treturn file;\n\t\t}\n\t\t_renderFile(file) {\n\t\t\tlet element = null;\n\t\t\tswitch (this.mode) {\n\t\t\tcase \"list\":\n\t\t\t\telement = file.tableRow();\n\t\t\t\tbreak;\n\t\t\tcase \"grid\":\n\t\t\t\telement = file.gridElement(this.options.overlayGenerator);\n\t\t\t\tbreak;\n\t\t\tcase \"preview\":\n\t\t\t\telement = file.previewElement(this.options.overlayGenerator);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (this.options.hideZeroSize && file.size === 0) {\n\t\t\t\telement.querySelector(\".fb-file-size\").innerHTML = \"\";\n\t\t\t}\n\t\t\tthis.options.onHtmlCreated?.call(this, element, file, this.mode);\n\t\t\treturn file;\n\t\t}\n\t\t_getDirectoryAndShowFirstComparisonFunctions() {\n\t\t\tif (this.options.separateFoldersFromFiles) {\n\t\t\t\treturn function (a, b) {\n\t\t\t\t\tif (a.isDirectory && !b.isDirectory) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (!a.isDirectory && b.isDirectory) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (a.showFirst && !b.showFirst) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (!a.showFirst && b.showFirst) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn function (a, b) {\n\t\t\t\t\tif (a.showFirst && !b.showFirst) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (!a.showFirst && b.showFirst) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\t_getSortFunction(column = null, ascending = null) {\n\t\t\tif (column === null) {\n\t\t\t\tcolumn = this.options.orderColumn;\n\t\t\t}\n\t\t\tif (ascending === null) {\n\t\t\t\tascending = this.options.orderAscending;\n\t\t\t}\n\t\t\tlet sortFunction = null;\n\t\t\tlet checkDirectoryAndShowFirst = this._getDirectoryAndShowFirstComparisonFunctions();\n\t\t\tswitch (column) {\n\t\t\tcase \"filename\":\n\t\t\t\tsortFunction = (a, b) => a.filename.localeCompare(b.filename);\n\t\t\t\tbreak;\n\t\t\tcase \"size\":\n\t\t\t\tsortFunction = (a, b) => a.size - b.size;\n\t\t\t\tbreak;\n\t\t\tcase \"modified\":\n\t\t\t\tsortFunction = (a, b) => {\n\t\t\t\t\tif (a.modified === null) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (b.modified === null) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn a.modified.getTime() - b.modified.getTime();\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\tcase \"type\":\n\t\t\t\tsortFunction = (a, b) => a.type.localeCompare(b.type);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Invalid column\");\n\t\t\t}\n\t\t\tlet multiplyer = ascending ? 1 : -1;\n\t\t\treturn (a, b) => {\n\t\t\t\tlet result = checkDirectoryAndShowFirst(a, b);\n\t\t\t\tif (result !== 0) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\treturn multiplyer * sortFunction(a, b);\n\t\t\t};\n\t\t}\n\t\t_findNextFile(file) {\n\t\t\tlet sortFunction = this._getSortFunction();\n\t\t\tif (this.filelist.length == 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tfor (let i = 0; i < this.filelist.length; i++) {\n\t\t\t\tif (sortFunction(file, this.filelist[i]) < 0) {\n\t\t\t\t\treturn this.filelist[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t_filenameToIcon(filename) {\n\t\t\tlet extension = filename.split(\".\").pop().toLowerCase();\n\t\t\tif (this.options.extensionToIcon instanceof Function) {\n\t\t\t\treturn this.options.extensionToIcon(extension);\n\t\t\t}\n\t\t\tif (extension in this.options.extensionToIcon) {\n\t\t\t\treturn this.options.extensionToIcon[extension];\n\t\t\t}\n\t\t\treturn this.options.extensionToIcon[\"\"] || this.options.defaultFileIcon;\n\t\t}\n\t\t_createGrid() {\n\t\t\tlet grid = document.createElement(\"div\");\n\t\t\tgrid.classList.add(\"fb-grid\");\n\t\t\tthis._elementsPlace = grid;\n\t\t\treturn grid;\n\t\t}\n\t\t_createPreview() {\n\t\t\tlet preview = document.createElement(\"div\");\n\t\t\tpreview.classList.add(\"fb-preview\");\n\t\t\tthis._elementsPlace = preview;\n\t\t\treturn preview;\n\t\t}\n\t\t_createList() {\n\t\t\tlet list = document.createElement(\"div\");\n\t\t\tlist.classList.add(\"fb-list\");\n\t\t\tlist.innerHTML = `\n        <table>\n            <thead>\n                <tr>\n                    <th class=\"fb-file-name\">Name</th>\n                    <th class=\"fb-file-size\">Size</th>\n                    <th class=\"fb-file-modified\">Modified</th>\n                </tr>\n            </thead>\n            <tbody></tbody>\n        </table>\n        `;\n\t\t\tthis._elementsPlace = list.querySelector(\"tbody\");\n\t\t\treturn list;\n\t\t}\n\t\t_renderFiles() {\n\t\t\tthis.filelist.forEach(file => {\n\t\t\t\tthis._placeFile(this._renderFile(file));\n\t\t\t});\n\t\t}\n\t}\n\tFileBrowser.version = \"1.0.3\";\n\tdocument.addEventListener(\"DOMContentLoaded\", () => {\n\t\tFileBrowser.mutationObserver.observe(document.body, {\n\t\t\tchildList: true,\n\t\t\tsubtree: true\n\t\t});\n\t\tFileBrowser.fromDOM(document.querySelectorAll(\".fb-filebrowser\"));\n\t});\n\texports.FileBrowser = FileBrowser;\n\tif (typeof exports === \"undefined\") {\n\t\texports = window;\n\t}\n\tclass FileInFileBrowser {\n\t\tstatic defaultOptions = {\n\t\t\tsize: 0,\n\t\t\tmodified: null,\n\t\t\ticon: \"fa fa-file\",\n\t\t\ttype: \"file\",\n\t\t\tisDirectory: false,\n\t\t\tshowFirst: false,\n\t\t\tpreviewUrl: null,\n\t\t\tonFileClick: null,\n\t\t\tonFileDoubleClick: null,\n\t\t\tdata: null,\n\t\t\tcontextMenu: null\n\t\t};\n\t\tconstructor(filename, options = {}) {\n\t\t\toptions = Object.assign({}, FileInFileBrowser.defaultOptions, options);\n\t\t\tthis.update(options);\n\t\t\tthis.filename = filename;\n\t\t\tthis.selected = false;\n\t\t\tthis._htmlElement = null;\n\t\t}\n\t\t_modifiedToDate(modified) {\n\t\t\tif (modified === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (typeof modified === \"string\" || modified instanceof String) {\n\t\t\t\tif (!isNaN(modified)) {\n\t\t\t\t\tmodified = parseInt(modified);\n\t\t\t\t} else {\n\t\t\t\t\tlet date = new Date(modified);\n\t\t\t\t\tif (date.toString() !== \"Invalid Date\") {\n\t\t\t\t\t\tmodified = date;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (typeof modified === \"number\" || modified instanceof Number) {\n\t\t\t\tlet date = new Date(modified);\n\t\t\t\tif (date.toString() !== \"Invalid Date\") {\n\t\t\t\t\tmodified = date;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (modified instanceof Date) {\n\t\t\t\treturn modified;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t_setModified(modified) {\n\t\t\tthis.modified = this._modifiedToDate(modified);\n\t\t}\n\t\tcompareOptions(options) {\n\t\t\tfor (let option in FileInFileBrowser.defaultOptions) {\n\t\t\t\tif (options[option] !== undefined) {\n\t\t\t\t\tswitch (option) {\n\t\t\t\t\tcase \"modified\":\n\t\t\t\t\t\tif (this.modified?.getTime() !== this._modifiedToDate(options[option])?.getTime()) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (this[option] !== options[option]) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tupdate(options = {}) {\n\t\t\tlet optionNames = Object.keys(FileInFileBrowser.defaultOptions);\n\t\t\tfor (let option of optionNames) {\n\t\t\t\tif (options[option] !== undefined) {\n\t\t\t\t\tswitch (option) {\n\t\t\t\t\tcase \"modified\":\n\t\t\t\t\t\tthis._setModified(options[option]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis[option] = options[option];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.isDirectory = options.isDirectory ?? false;\n\t\t}\n\t\tselect() {\n\t\t\tthis.selected = true;\n\t\t\tif (this._htmlElement) {\n\t\t\t\tthis._htmlElement.classList.add(\"selected\");\n\t\t\t}\n\t\t}\n\t\tunselect() {\n\t\t\tthis.selected = false;\n\t\t\tif (this._htmlElement) {\n\t\t\t\tthis._htmlElement.classList.remove(\"selected\");\n\t\t\t}\n\t\t}\n\t\ttoggleSelect() {\n\t\t\tif (this.selected) {\n\t\t\t\tthis.unselect();\n\t\t\t} else {\n\t\t\t\tthis.select();\n\t\t\t}\n\t\t}\n\t\tinsertBefore(otherFile) {\n\t\t\tif (this._htmlElement !== null && otherFile._htmlElement !== null) {\n\t\t\t\totherFile._htmlElement.insertAdjacentElement(\"beforebegin\", this._htmlElement);\n\t\t\t}\n\t\t}\n\t\tinsertAfter(otherFile) {\n\t\t\tif (this._htmlElement !== null && otherFile._htmlElement !== null) {\n\t\t\t\totherFile._htmlElement.insertAdjacentElement(\"afterend\", this._htmlElement);\n\t\t\t}\n\t\t}\n\t\tcreateContextMenu() {\n\t\t\tif (this.contextMenu === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tlet contextMenu = document.createElement(\"div\");\n\t\t\tcontextMenu.classList.add(\"fb-dropdown\", \"fb-dropdown-s\", \"fb-file-context-menu\");\n\t\t\tcontextMenu.innerHTML = `\n            <button class=\"fb-dropdown-toggle\" type=\"button\">\n                <i class=\"fa fa-ellipsis-v\"></i>\n            </button>`;\n\t\t\tlet dropdownContent = document.createElement(\"ul\");\n\t\t\tdropdownContent.classList.add(\"fb-dropdown-content\");\n\t\t\tlet contextMenuOptions = this.contextMenu;\n\t\t\tif (contextMenuOptions instanceof Array) {\n\t\t\t\tcontextMenuOptions = contextMenuOptions.reduce((acc, item) => {\n\t\t\t\t\tacc[item] = {};\n\t\t\t\t\treturn acc;\n\t\t\t\t}, {});\n\t\t\t}\n\t\t\tfor (let option in contextMenuOptions) {\n\t\t\t\tif (option.startsWith(\"__\")) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet item = document.createElement(\"li\");\n\t\t\t\tlet button = document.createElement(\"button\");\n\t\t\t\tbutton.type = \"button\";\n\t\t\t\tbutton.dataset.action = option;\n\t\t\t\tlet text = contextMenuOptions[option].label ?? option;\n\t\t\t\tif (contextMenuOptions[option].icon) {\n\t\t\t\t\tbutton.innerHTML = `<i class=\"${contextMenuOptions[option].icon}\"></i> ${text}`;\n\t\t\t\t} else {\n\t\t\t\t\tbutton.innerText = text;\n\t\t\t\t}\n\t\t\t\tlet handler = contextMenuOptions[option].handler ?? contextMenuOptions[option];\n\t\t\t\tif (handler instanceof Function) {\n\t\t\t\t\tbutton.addEventListener(\"click\", file => {\n\t\t\t\t\t\thandler(this);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\titem.appendChild(button);\n\t\t\t\tdropdownContent.appendChild(item);\n\t\t\t}\n\t\t\tcontextMenu.appendChild(dropdownContent);\n\t\t\tnew FBDropdown(contextMenu, {\n\t\t\t\tcloseOnOutsideClick: true\n\t\t\t});\n\t\t\treturn contextMenu;\n\t\t}\n\t\ttableRow() {\n\t\t\tif (this._htmlElement !== null) {\n\t\t\t\tthis._htmlElement.remove();\n\t\t\t}\n\t\t\tlet row = document.createElement(\"tr\");\n\t\t\trow.innerHTML = `\n            <td class=\"fb-file-name\"><span class=\"fb-file-icon\"><i class=\"${this.icon}\"></i></span> ${this.filename}</td>\n            <td class=\"fb-file-size\">${toHumanSize(this.size)}</td>\n            <td class=\"fb-file-modified\">${this._modifiedStr()}</td>\n        `;\n\t\t\trow.dataset.filename = btoa_utf8(this.filename);\n\t\t\trow.dataset.size = this.size;\n\t\t\trow.dataset.modified = this.modified?.getTime();\n\t\t\trow.dataset.type = this.type;\n\t\t\tif (this.selected) {\n\t\t\t\trow.classList.add(\"selected\");\n\t\t\t}\n\t\t\trow.addEventListener(\"click\", e => {\n\t\t\t\tif (this.onFileClick instanceof Function) {\n\t\t\t\t\tthis.onFileClick(this, e);\n\t\t\t\t}\n\t\t\t});\n\t\t\trow.addEventListener(\"dblclick\", e => {\n\t\t\t\tif (this.onFileDoubleClick instanceof Function) {\n\t\t\t\t\tthis.onFileDoubleClick(this, e);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (this.selected) {\n\t\t\t\trow.classList.add(\"selected\");\n\t\t\t}\n\t\t\tthis._htmlElement = row;\n\t\t\treturn this._htmlElement;\n\t\t}\n\t\tpreviewElement(overlayGenerator = null) {\n\t\t\tif (this._htmlElement !== null) {\n\t\t\t\tthis._htmlElement.remove();\n\t\t\t}\n\t\t\tlet overlay = null;\n\t\t\tif (overlayGenerator instanceof Function) {\n\t\t\t\toverlay = overlayGenerator(this);\n\t\t\t}\n\t\t\tlet contextMenu = this.createContextMenu();\n\t\t\tlet element = document.createElement(\"div\");\n\t\t\telement.classList.add(\"fb-file-wrapper\");\n\t\t\telement.innerHTML = `\n            <div class=\"fb-file\">\n            </div>\n        `;\n\t\t\tlet previewElement = element.querySelector(\".fb-file\");\n\t\t\tif (this.previewUrl !== null) {\n\t\t\t\tpreviewElement.innerHTML = `\n                <div class=\"fb-preview-image\">\n                    <div class=\"fb-preview-image-background\" style=\"background-image: url('${this.previewUrl}')\"></div>\n                    <div class=\"fb-preview-image-image\" style=\"background-image: url('${this.previewUrl}')\"></div>\n                </div>\n            `;\n\t\t\t} else {\n\t\t\t\tpreviewElement.innerHTML = `\n                <div class=\"fb-file-icon\">\n                    <i class=\"${this.icon}\"></i>\n                </div>`;\n\t\t\t}\n\t\t\tpreviewElement.innerHTML += `\n                <div class=\"fb-file-details\">\n                    <p class=\"fb-file-name\">${this.filename}</p>\n                    <p class=\"fb-file-size\">${toHumanSize(this.size)}</p>\n                    <p class=\"fb-file-modified\">${this._modifiedStr()}</p>\n                </div>\n        `;\n\t\t\tif (overlay !== null || contextMenu !== null) {\n\t\t\t\tlet overlayElement = document.createElement(\"div\");\n\t\t\t\toverlayElement.classList.add(\"fb-preview-overlay\");\n\t\t\t\tif (overlay !== null) {\n\t\t\t\t\toverlayElement.appendChild(overlay);\n\t\t\t\t}\n\t\t\t\tif (contextMenu !== null) {\n\t\t\t\t\toverlayElement.appendChild(contextMenu);\n\t\t\t\t}\n\t\t\t\telement.appendChild(overlayElement);\n\t\t\t}\n\t\t\telement.dataset.filename = btoa_utf8(this.filename);\n\t\t\telement.dataset.size = this.size;\n\t\t\telement.dataset.modified = this.modified?.getTime();\n\t\t\telement.dataset.type = this.type;\n\t\t\tif (this.selected) {\n\t\t\t\telement.classList.add(\"selected\");\n\t\t\t}\n\t\t\tthis._htmlElement = element;\n\t\t\telement.addEventListener(\"click\", e => {\n\t\t\t\tif (this.onFileClick instanceof Function) {\n\t\t\t\t\tthis.onFileClick(this, e);\n\t\t\t\t}\n\t\t\t});\n\t\t\telement.addEventListener(\"dblclick\", e => {\n\t\t\t\tif (this.onFileDoubleClick instanceof Function) {\n\t\t\t\t\tthis.onFileDoubleClick(this, e);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this._htmlElement;\n\t\t}\n\t\t_modifiedStr() {\n\t\t\treturn this.modified === null || this.modified === undefined ? \"\" : this.modified.toLocaleString();\n\t\t}\n\t\tgridElement(overlayGenerator = null) {\n\t\t\tif (this._htmlElement !== null) {\n\t\t\t\tthis._htmlElement.remove();\n\t\t\t}\n\t\t\tlet overlay = null;\n\t\t\tif (overlayGenerator instanceof Function) {\n\t\t\t\toverlay = overlayGenerator(this);\n\t\t\t}\n\t\t\tlet contextMenu = this.createContextMenu();\n\t\t\tlet element = document.createElement(\"div\");\n\t\t\telement.classList.add(\"fb-file-wrapper\");\n\t\t\telement.innerHTML = `\n            <div class=\"fb-file\">\n                <div class=\"fb-file-icon\">\n                    <i class=\"${this.icon}\"></i>\n                </div>\n                <div class=\"fb-file-details\" title=\"${this.filename}\">\n                    <p class=\"fb-file-name\">${this.filename}</p>\n                    <p class=\"fb-file-size\">${toHumanSize(this.size)}</p>\n                    <p class=\"fb-file-modified\">${this._modifiedStr()}</p>\n                </div>\n            </div>\n        `;\n\t\t\tif (overlay !== null || contextMenu !== null) {\n\t\t\t\tlet overlayElement = document.createElement(\"div\");\n\t\t\t\toverlayElement.classList.add(\"fb-file-overlay\");\n\t\t\t\tif (overlay !== null) {\n\t\t\t\t\toverlayElement.appendChild(overlay);\n\t\t\t\t}\n\t\t\t\tif (contextMenu !== null) {\n\t\t\t\t\toverlayElement.appendChild(contextMenu);\n\t\t\t\t}\n\t\t\t\telement.appendChild(overlayElement);\n\t\t\t}\n\t\t\telement.dataset.filename = btoa_utf8(this.filename);\n\t\t\telement.dataset.size = this.size;\n\t\t\telement.dataset.modified = this.modified?.getTime();\n\t\t\telement.dataset.type = this.type;\n\t\t\tif (this.selected) {\n\t\t\t\telement.classList.add(\"selected\");\n\t\t\t}\n\t\t\tthis._htmlElement = element;\n\t\t\telement.addEventListener(\"click\", e => {\n\t\t\t\tif (this.onFileClick instanceof Function) {\n\t\t\t\t\tthis.onFileClick(this, e);\n\t\t\t\t}\n\t\t\t});\n\t\t\telement.addEventListener(\"dblclick\", e => {\n\t\t\t\tif (this.onFileDoubleClick instanceof Function) {\n\t\t\t\t\tthis.onFileDoubleClick(this, e);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this._htmlElement;\n\t\t}\n\t}\n\texports.FileInFileBrowser = FileInFileBrowser;\n\tconst ClassesMixin = {\n\t\thasClasses: function (classes) {\n\t\t\tif (typeof classes === \"string\") {\n\t\t\t\tclasses = classes.split(\" \").map(c => c.trim()).filter(c => c.length > 0);\n\t\t\t}\n\t\t\tif (!Array.isArray(classes)) {\n\t\t\t\tthrow new Error(\"Classes must be an array or a string\");\n\t\t\t}\n\t\t\treturn classes.every(c => this.classList.contains(c));\n\t\t},\n\t\taddClasses: function (classes) {\n\t\t\tif (typeof classes === \"string\") {\n\t\t\t\tclasses = classes.split(\" \").map(c => c.trim()).filter(c => c.length > 0);\n\t\t\t}\n\t\t\tif (!Array.isArray(classes)) {\n\t\t\t\tthrow new Error(\"Classes must be an array or a string\");\n\t\t\t}\n\t\t\tclasses.forEach(c => this.classList.add(c));\n\t\t},\n\t\tremoveClasses: function (classes) {\n\t\t\tif (typeof classes === \"string\") {\n\t\t\t\tclasses = classes.split(\" \").map(c => c.trim()).filter(c => c.length > 0);\n\t\t\t}\n\t\t\tif (!Array.isArray(classes)) {\n\t\t\t\tthrow new Error(\"Classes must be an array or a string\");\n\t\t\t}\n\t\t\tclasses.forEach(c => this.classList.remove(c));\n\t\t}\n\t};\n\tclass ResizableColumnTable {\n\t\tstatic defaultOptions = {\n\t\t\tfirstColumn: 0,\n\t\t\tlastColumn: -1,\n\t\t\tsortableHeaders: true,\n\t\t\tclassSorter: \"sorter fas\",\n\t\t\tclassUnsorted: \"fa-sort\",\n\t\t\tclassSorterUp: \"up fa-sort-up\",\n\t\t\tclassSorterDown: \"down fa-sort-down\",\n\t\t\tonSort: (header, direction) => {}\n\t\t};\n\t\tconstructor(table, options = {}) {\n\t\t\tthis.options = Object.assign({}, ResizableColumnTable.defaultOptions, options);\n\t\t\tlet headers = table.querySelectorAll(\"th\");\n\t\t\tif (this.options.lastColumn < 0) {\n\t\t\t\tthis.options.lastColumn = headers.length + this.options.lastColumn;\n\t\t\t}\n\t\t\tif (this.options.lastColumn < 0 || this.options.lastColumn >= headers.length) {\n\t\t\t\tthrow new Error(\"Last column is invalid\");\n\t\t\t}\n\t\t\tif (this.options.firstColumn > this.options.lastColumn) {\n\t\t\t\tthrow new Error(\"First column is greater than last column\");\n\t\t\t}\n\t\t\tthis.table = table;\n\t\t\tthis.table._fbResizableTable = this;\n\t\t\tthis.headers = headers;\n\t\t\tthis.resizers = [];\n\t\t\tlet previousHeader = null;\n\t\t\tfor (let i = this.options.firstColumn; i < this.options.lastColumn + 1; i++) {\n\t\t\t\tlet header = headers[i];\n\t\t\t\tlet resizer = document.createElement(\"div\");\n\t\t\t\tresizer.classList.add(\"fb-resizer\");\n\t\t\t\theader.appendChild(resizer);\n\t\t\t\tthis.resizers.push(resizer);\n\t\t\t\tthis.addEventHandlers(header, resizer);\n\t\t\t\tif (previousHeader != null) {\n\t\t\t\t\tpreviousHeader._nextHeader = header;\n\t\t\t\t}\n\t\t\t\tpreviousHeader = header;\n\t\t\t}\n\t\t\tif (previousHeader != null && previousHeader != headers[headers.length - 1]) {\n\t\t\t\tpreviousHeader._nextHeader = headers[headers.length - 1];\n\t\t\t}\n\t\t\tif (this.options.sortableHeaders) {\n\t\t\t\tthis.addSortingIcons();\n\t\t\t}\n\t\t}\n\t\tsetOrder(column, direction) {\n\t\t\tif (typeof column !== \"number\") {\n\t\t\t\tthrow new Error(\"Column index must be a number\");\n\t\t\t}\n\t\t\tif (column < this.options.firstColumn || column > this.options.lastColumn) {\n\t\t\t\tthrow new Error(\"Column index out of range\");\n\t\t\t}\n\t\t\tlet header = this.headers[column];\n\t\t\tlet icon = header.querySelector(\".sorter\");\n\t\t\tif (icon == null) {\n\t\t\t\tthrow new Error(\"Column is not sortable\");\n\t\t\t}\n\t\t\ticon.removeClasses(this.options.classSorterUp);\n\t\t\ticon.removeClasses(this.options.classSorterDown);\n\t\t\ticon.addClasses(this.options.classUnsorted);\n\t\t\tif (direction == \"asc\") {\n\t\t\t\ticon.removeClasses(this.options.classUnsorted);\n\t\t\t\ticon.addClasses(this.options.classSorterUp);\n\t\t\t\ticon.removeClasses(this.options.classSorterDown);\n\t\t\t} else if (direction == \"desc\") {\n\t\t\t\ticon.removeClasses(this.options.classUnsorted);\n\t\t\t\ticon.removeClasses(this.options.classSorterUp);\n\t\t\t\ticon.addClasses(this.options.classSorterDown);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Invalid direction\");\n\t\t\t}\n\t\t}\n\t\taddSortingIcons() {\n\t\t\tlet columnIndexes = [];\n\t\t\tif (!Array.isArray(this.options.sortableHeaders)) {\n\t\t\t\tif (this.options.sortableHeaders === true) {\n\t\t\t\t\tcolumnIndexes = Array.from(this.headers).map((header, index) => index);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcolumnIndexes = this.options.sortableHeaders.filter(index => index >= 0 && index < this.headers.length);\n\t\t\t}\n\t\t\tcolumnIndexes.forEach(index => {\n\t\t\t\tlet header = this.headers[index];\n\t\t\t\tlet sortingIcon = document.createElement(\"i\");\n\t\t\t\tObject.assign(sortingIcon, ClassesMixin);\n\t\t\t\tsortingIcon.addClasses(this.options.classSorter);\n\t\t\t\tsortingIcon.addClasses(this.options.classUnsorted);\n\t\t\t\theader.addEventListener(\"click\", event => {\n\t\t\t\t\theader.closest(\"thead\").querySelectorAll(\".sorter\").forEach(icon => {\n\t\t\t\t\t\tif (icon != sortingIcon) {\n\t\t\t\t\t\t\ticon.removeClasses(this.options.classSorterUp);\n\t\t\t\t\t\t\ticon.removeClasses(this.options.classSorterDown);\n\t\t\t\t\t\t\ticon.addClasses(this.options.classUnsorted);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (sortingIcon.hasClasses(this.options.classSorterUp)) {\n\t\t\t\t\t\tsortingIcon.removeClasses(this.options.classUnsorted);\n\t\t\t\t\t\tsortingIcon.removeClasses(this.options.classSorterUp);\n\t\t\t\t\t\tsortingIcon.addClasses(this.options.classSorterDown);\n\t\t\t\t\t} else if (sortingIcon.hasClasses(this.options.classSorterDown)) {\n\t\t\t\t\t\tsortingIcon.removeClasses(this.options.classUnsorted);\n\t\t\t\t\t\tsortingIcon.removeClasses(this.options.classSorterDown);\n\t\t\t\t\t\tsortingIcon.addClasses(this.options.classSorterUp);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsortingIcon.removeClasses(this.options.classUnsorted);\n\t\t\t\t\t\tsortingIcon.addClasses(this.options.classSorterUp);\n\t\t\t\t\t\tsortingIcon.removeClasses(this.options.classSorterDown);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.options.onSort instanceof Function) {\n\t\t\t\t\t\tthis.options.onSort(header, sortingIcon.hasClasses(this.options.classSorterUp) ? \"asc\" : \"desc\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\theader.appendChild(sortingIcon);\n\t\t\t});\n\t\t}\n\t\tupdateResizerHeight() {\n\t\t\tthis.resizers.forEach(resizer => {\n\t\t\t\tresizer.style.height = this.table.offsetHeight + \"px\";\n\t\t\t});\n\t\t}\n\t\taddEventHandlers(th, resizer) {\n\t\t\tlet x = 0;\n\t\t\tlet width = 0;\n\t\t\tlet next_header = null;\n\t\t\tlet next_width = 0;\n\t\t\tlet mousemoveEventHander = event => {\n\t\t\t\tlet dx = event.clientX - x;\n\t\t\t\tif (width + dx < 20) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (next_header != null) {\n\t\t\t\t\tnext_header.style.width = next_width - dx + \"px\";\n\t\t\t\t\tif (next_width - dx < 20) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tth.style.width = width + dx + \"px\";\n\t\t\t};\n\t\t\tlet mouseupEventHandler = () => {\n\t\t\t\tdocument.removeEventListener(\"mousemove\", mousemoveEventHander);\n\t\t\t\tdocument.removeEventListener(\"mouseup\", mouseupEventHandler);\n\t\t\t\tth.classList.remove(\"resizing\");\n\t\t\t\tth._nextHeader?.classList.remove(\"resizing\");\n\t\t\t\tresizer.classList.remove(\"resizing\");\n\t\t\t};\n\t\t\tresizer.addEventListener(\"mousedown\", event => {\n\t\t\t\tx = event.clientX;\n\t\t\t\twidth = parseInt(window.getComputedStyle(th).width, 10);\n\t\t\t\tnext_header = th._nextHeader ?? null;\n\t\t\t\tif (next_header != null) {\n\t\t\t\t\tnext_width = parseInt(window.getComputedStyle(next_header).width, 10);\n\t\t\t\t}\n\t\t\t\tdocument.addEventListener(\"mousemove\", mousemoveEventHander);\n\t\t\t\tdocument.addEventListener(\"mouseup\", mouseupEventHandler);\n\t\t\t\tth.classList.add(\"resizing\");\n\t\t\t\tth._nextHeader?.classList.add(\"resizing\");\n\t\t\t\tresizer.classList.add(\"resizing\");\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction btoa_utf8(value) {\n\t\treturn btoa(String.fromCharCode(...new TextEncoder(\"utf-8\").encode(value)));\n\t}\n\n\tfunction atob_utf8(value) {\n\t\tconst value_latin1 = atob(value);\n\t\treturn new TextDecoder(\"utf-8\").decode(Uint8Array.from({\n\t\t\tlength: value_latin1.length\n\t\t}, (element, index) => value_latin1.charCodeAt(index)));\n\t}\n\n\tfunction toHumanSize(size) {\n\t\tif (size === null || size === undefined) {\n\t\t\treturn \"\";\n\t\t}\n\t\tconst units = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\"];\n\t\tlet unitIndex = 0;\n\t\tsize = parseFloat(size);\n\t\tif (isNaN(size)) {\n\t\t\treturn \"0 B\";\n\t\t}\n\t\twhile (size >= 1024 && unitIndex < units.length - 1) {\n\t\t\tsize /= 1024;\n\t\t\tunitIndex++;\n\t\t}\n\t\treturn `${size.toFixed(2)} ${units[unitIndex]}`;\n\t}\n\n\tfunction covertCallback(callback, context = null) {\n\t\tif (callback === null) {\n\t\t\treturn null;\n\t\t}\n\t\tif (typeof callback === \"string\") {\n\t\t\tlet stringCallback = callback;\n\t\t\tcallback = _ => {\n\t\t\t\tconst file = _;\n\t\t\t\teval(stringCallback);\n\t\t\t};\n\t\t}\n\t\tif (callback instanceof Function) {\n\t\t\tif (context !== null) {\n\t\t\t\treturn callback.bind(context);\n\t\t\t}\n\t\t\treturn callback;\n\t\t}\n\t\tthrow new Error(\"Invalid callback\");\n\t}\n\n\tfunction isValidURL(url) {\n\t\tif (url instanceof URL) {\n\t\t\treturn true;\n\t\t}\n\t\ttry {\n\t\t\tnew URL(url);\n\t\t\treturn true;\n\t\t} catch (_) {\n\t\t\treturn false;\n\t\t}\n\t}\n})(window);\n"],"names":["exports","window","FBDropdown","defaults","closeOnOutsideClick","openingSide","openingSideToPage","extractOptions","let","key","options","undefined","this","dropdown","dataset","constructor","_fbDropdown","effectiveOptions","Object","assign","toggle","querySelector","content","isOpen","documentClickHandler","event","contains","target","hide","optionsInMenu","querySelectorAll","closeHandler","stopPropagation","addEventListener","toggleOpen","forEach","option","document","show","openToLeft","parentRect","body","parentElement","getBoundingClientRect","buttonRect","rect","style","removeProperty","right","left","width","classList","add","remove","version","FileBrowser","iconUtils","extensionToIconFontAwesome","txt","pdf","doc","docx","xls","xlsx","ppt","pptx","jpg","jpeg","png","gif","mp3","wav","mov","mp4","avi","zip","rar","tar","gz","7z","exe","js","css","html","php","py","java","c","cpp","h","hpp","json","xml","csv","file","md","extensionToIconBootstrapIcons","defaultFileIconFontAwesome","defaultFolderIconFontAwesome","defaultFileIconBootstrapIcons","defaultFolderIconBootstrapIcons","useBootstrapIcons","defaultOptions","extensionToIcon","defaultFileIcon","defaultFolderIcon","useFontAwesomeIcons","mode","orderColumn","orderAscending","hideZeroSize","allowDuplicates","separateFoldersFromFiles","enableSelection","allowMultipleSelection","onFileClick","onFileDoubleClick","onSelectionUpdate","files","overlayGenerator","onHtmlCreated","element","onFileDownload","onFileDelete","onFileRename","onFileCopy","onFileMove","onFileShare","onFileInfo","customContextMenu","mutationObserver","MutationObserver","mutations","fromDOM","objects","result","Element","NodeList","Array","from","isArray","Error","length","filebrowser","current","_fbFileBrowser","push","_lastFileSelected","keys","console","warn","optionsFromDOM","_optionsFromDOM","filelist","_elementsPlace","_htmlElement","_evaluateOptions","existingFiles","map","filename","size","modified","isDirectory","type","previewUrl","icon","data","textContent","render","addFolder","addFile","updateOptions","fromClear","existingOptions","changed","getFiles","getSelectedFiles","filter","selected","clearSelection","unselect","_setMode","toLowerCase","_addFile","find","contextMenu","_filenameToIcon","split","pop","e","indexesSelected","indexOf","shiftKey","ctrlKey","metaKey","select","lastFileIndex","currentFileIndex","start","Math","min","end","max","i","toggleSelect","indexesSelectedNow","join","FileInFileBrowser","nextFile","_findNextFile","splice","_placeFile","_renderFile","addOrUpdateFile","existing","findFile","Date","updateFile","htmlElement","compareOptions","update","name","updateFolder","addOrUpdateFolder","findFiles","regex","RegExp","replace","test","removeFile","index","forEachFile","callback","innerHTML","_createList","_createGrid","_createPreview","_renderFiles","appendChild","resizableColumnTable","ResizableColumnTable","sortableHeaders","onSort","column","ascending","trim","sort","setOrder","sortFunction","_getSortFunction","clear","prefix","dataKey","toUpperCase","slice","value","isNaN","parseFloat","toString","_generateContextMenu","Function","label","handler","__generated","bind","covertCallback","insertAdjacentElement","tableRow","gridElement","previewElement","call","_getDirectoryAndShowFirstComparisonFunctions","a","b","showFirst","checkDirectoryAndShowFirst","localeCompare","getTime","multiplyer","extension","grid","createElement","preview","list","observe","childList","subtree","_modifiedToDate","date","String","parseInt","Number","_setModified","insertBefore","otherFile","insertAfter","createContextMenu","dropdownContent","contextMenuOptions","reduce","acc","item","startsWith","button","text","action","innerText","row","toHumanSize","_modifiedStr","btoa_utf8","overlay","overlayElement","toLocaleString","ClassesMixin","hasClasses","classes","every","addClasses","removeClasses","firstColumn","lastColumn","classSorter","classUnsorted","classSorterUp","classSorterDown","header","direction","table","headers","_fbResizableTable","resizers","previousHeader","resizer","addEventHandlers","_nextHeader","addSortingIcons","columnIndexes","sortingIcon","closest","updateResizerHeight","height","offsetHeight","th","x","next_header","next_width","mousemoveEventHander","dx","clientX","mouseupEventHandler","removeEventListener","getComputedStyle","btoa","fromCharCode","TextEncoder","encode","atob_utf8","value_latin1","atob","TextDecoder","decode","Uint8Array","charCodeAt","units","unitIndex","toFixed","context","stringCallback","_","eval","isValidURL","url","URL"],"mappings":"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"}